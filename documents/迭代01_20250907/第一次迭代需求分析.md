# 乒乓球培训管理系统 - 第一次迭代需求分析

## 项目概述

乒乓球培训管理系统是一个前后端分离的Web应用程序，旨在为乒乓球培训机构提供学员管理、教练管理、课程预约等核心功能。

## 第一次迭代需求

### 前端需求

#### 1. 页面实现需求
- **首页（HomeView）**: 系统主页面，展示系统概览信息
- **登录页（LoginView）**: 用户登录功能，支持学员、教练、管理员登录
- **学员注册页（StudentRegisterView）**: 学员用户注册功能
- **教练员注册页（CoachRegisterView）**: 教练员用户注册功能
- **学员课表页**: 学员查看和管理个人课程安排

#### 2. 技术需求
- 使用Vue 3框架开发
- 熟悉Vue生态系统和组件化开发
- 实现静态页面，为后续API集成做准备
- 采用组件化设计，提高代码复用性
- 预留数据接口，避免硬编码

#### 3. 协作需求
- 熟悉Git版本控制协作流程
- 学习分支管理和代码合并策略

### 后端需求

#### 1. 项目框架
- 搭建基于Kotlin + Ktor的后端项目框架
- 配置开发环境和项目依赖
- 实现基本的服务器启动和配置

#### 2. 路由系统
- 设计RESTful API路由结构
- 实现用户相关路由端点
- 配置路由中间件和请求处理

#### 3. 数据库设计
- **学员数据库**：设计学员信息存储结构
- **教练员数据库**：设计教练员信息存储结构
- **用户数据库**：设计统一的用户认证系统
- 建立数据库表关系和索引

#### 4. API接口
- **注册API**：实现学员和教练员注册功能
- **登录API**：实现用户身份验证和登录功能
- 设计统一的API响应格式
- 实现基本的错误处理机制

## 功能需求分析

### 1. 用户管理系统

#### 用户角色定义
- **超级管理员（SUPER_ADMIN）**：系统最高权限，管理整个系统
- **校区管理员（CAMPUS_ADMIN）**：管理特定校区的运营
- **教练（COACH）**：管理自己的课程和学员
- **学员（STUDENT）**：预约课程，查看课表

#### 用户注册流程
1. 用户填写注册信息（用户名、密码、真实姓名、联系方式等）
2. 系统验证信息格式和唯一性
3. 密码加密存储（使用BCrypt算法）
4. 创建用户账户并返回结果

#### 用户登录流程
1. 用户输入用户名和密码
2. 系统验证用户凭据
3. 生成用户会话（Session）
4. 返回用户信息和权限

### 2. 数据存储需求

#### 用户表（User）
- 基本信息：用户名、密码、真实姓名、性别、年龄
- 联系信息：手机号、邮箱
- 系统信息：角色、状态、创建时间、最后登录时间
- 校区关联：campus_id

#### 学员表（Student）
- 关联用户信息
- 账户余额
- 时间戳信息

#### 教练表（Coach）
- 关联用户信息
- 专业信息：头像、成就、等级、时薪
- 容量管理：最大学员数、当前学员数
- 审核状态：是否通过审核、审核人

#### 校区表（Campus）
- 校区基本信息
- 地址和联系方式

#### 师生关系表（Student_Coach_Relation）
- 学员与教练的关联关系
- 支持多对多关系

## 非功能性需求

### 1. 性能需求
- 登录响应时间 < 2秒
- 页面加载时间 < 3秒
- 支持并发用户数 > 100

### 2. 安全需求
- 密码加密存储
- 用户会话管理
- 防止SQL注入攻击
- 输入数据验证

### 3. 可用性需求
- 响应式设计，支持移动端访问
- 友好的用户界面
- 清晰的错误提示信息

### 4. 可维护性需求
- 模块化代码结构
- 完善的日志记录
- 规范的代码注释
- 版本控制管理

## 技术栈选择

### 前端技术栈
- **Vue 3**: 现代化的前端框架
- **Element Plus**: UI组件库
- **Vue Router**: 路由管理
- **Pinia**: 状态管理
- **Axios**: HTTP客户端
- **Vite**: 构建工具

### 后端技术栈
- **Kotlin**: 编程语言
- **Ktor**: Web框架
- **Exposed**: ORM框架
- **MySQL**: 数据库
- **HikariCP**: 连接池
- **BCrypt**: 密码加密
- **Docker**: 容器化部署

## 项目结构

### 前端项目结构
```
frontend/
├── src/
│   ├── views/auth/           # 认证相关页面
│   ├── components/           # 可复用组件
│   ├── router/              # 路由配置
│   ├── stores/              # 状态管理
│   ├── utils/               # 工具函数
│   └── assets/              # 静态资源
```

### 后端项目结构
```
backend/
├── src/main/kotlin/
│   ├── dto/                 # 数据传输对象
│   ├── persistence/         # 数据持久化层
│   ├── routes/              # 路由处理
│   ├── plugins/             # 插件配置
│   └── utils/               # 工具函数
```

## 风险分析

### 1. 技术风险
- 团队对Kotlin/Ktor技术栈的熟悉程度
- Vue 3生态系统的学习曲线
- 数据库设计的复杂性

### 2. 进度风险
- 前后端开发进度不同步
- 需求理解不一致
- 技术难点解决时间不确定

### 3. 质量风险
- 代码质量标准不统一
- 测试覆盖率不足
- 接口设计变更频繁

## 成功标准

1. 完成所有计划页面的静态实现
2. 建立完整的后端项目框架
3. 实现用户注册和登录API
4. 数据库表创建和基本数据操作
5. 前后端项目可独立运行
6. Git协作流程顺畅
